<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ThIAguinho Wii: DEBUG</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@700&family=Russo+One&display=swap');
        body { background: #111; margin: 0; overflow: hidden; font-family: sans-serif; touch-action: none; }
        
        /* CONSOLE DE DEBUG NA TELA (CRUCIAL) */
        #debug-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 150px;
            background: rgba(0,0,0,0.8); color: #0f0; font-family: monospace;
            font-size: 10px; overflow-y: scroll; z-index: 9999;
            padding: 5px; border-bottom: 2px solid #0f0; pointer-events: none;
        }

        #layer-os { position: relative; width: 100%; height: 100%; z-index: 50; }
        .screen { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #fff, #ddd); transition: opacity 0.3s; }
        .hidden { opacity: 0; pointer-events: none; z-index: -1; }

        /* Grade Mobile (2 colunas) */
        .wii-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; width: 95%; max-width: 600px; padding: 20px; margin-top: 100px; }
        
        .channel { 
            background: #fff; border: 4px solid #fff; border-radius: 15px; 
            aspect-ratio: 16/10; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; 
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .channel:active { border-color: #3498db; background: #eef; transform: scale(0.95); }
        .channel-icon { font-size: 3rem; }
        .channel-title { font-weight: bold; color: #555; font-size: 0.8rem; }

        #game-ui { background: transparent; }
        .btn-wii { background: #3498db; color: white; padding: 15px 40px; border-radius: 30px; font-weight: bold; font-size: 1.2rem; border: none; }
    </style>
</head>
<body>

    <div id="debug-overlay">Console Iniciado...<br></div>

    <div id="layer-hw">
        <video id="webcam" autoplay muted playsinline style="position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; opacity:0; transform:scaleX(-1);"></video>
        <canvas id="game-canvas" style="position:fixed; top:0; left:0; width:100%; height:100%;"></canvas>
    </div>

    <div id="layer-os">
        <div id="screen-menu" class="screen">
            <h1 style="color:#333; margin-top: 20px;">MENU vDebug</h1>
            <div class="wii-grid" id="channel-grid"></div>
            <button onclick="window.location.reload()" style="margin-top:20px; padding:10px;">RECARREGAR PÁGINA</button>
        </div>

        <div id="screen-game" class="screen hidden" style="background:transparent;">
            <button onclick="window.System.menu()" style="position:absolute; top:160px; right:20px; font-size:30px; z-index:100;">❌</button>
            <div id="score-display" style="position:absolute; top:160px; left:20px; font-size:40px; color:white; font-weight:bold; text-shadow:2px 2px 0 #000;">0</div>
            <div id="game-msg" style="color:white; font-size:50px; font-weight:black; text-shadow:2px 2px 0 #000;"></div>
        </div>
    </div>

    <script src="js/core.js"></script>
    <script src="js/game_run.js"></script>
    <script>
        // Função Global de Log na Tela
        window.log = function(msg) {
            const d = document.getElementById('debug-overlay');
            d.innerHTML += "> " + msg + "<br>";
            d.scrollTop = d.scrollHeight;
            console.log(msg);
        };
        
        window.onerror = function(msg, url, line) {
            window.log("ERRO FATAL: " + msg + " (Linha: " + line + ")");
            return false;
        };

        window.log("HTML carregado. Aguardando JS...");
    </script>
</body>
</html>