<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ThIAguinho Wii: OTTO CONSOLE</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Estilo Visual (Mantido o bonito) */
        @import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&family=Russo+One&family=Roboto:wght@300;400;700&display=swap');
        :root { --wii-blue: #3498db; }
        body { background-color: #111; margin: 0; overflow: hidden; font-family: 'Roboto', sans-serif; touch-action: none; user-select: none; }
        
        #layer-hw { position: absolute; inset: 0; z-index: 0; background: #000; }
        #webcam { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); opacity: 0; }
        #game-canvas { position: absolute; inset: 0; width: 100%; height: 100%; display: block; }
        
        #layer-os { position: relative; width: 100%; height: 100%; z-index: 50; pointer-events: none; }
        .screen { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle at center, #fff, #ddd); pointer-events: auto; transition: opacity 0.3s; }
        .hidden { opacity: 0; pointer-events: none; z-index: -1; }

        .channel { background: #fff; border-radius: 20px; border: 4px solid #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.1s; aspect-ratio: 16/9; }
        .channel:active { transform: scale(0.95); border-color: var(--wii-blue); background: #eef; }
        .channel-icon { font-size: 3rem; pointer-events: none; }
        .channel-title { font-weight: 700; color: #555; font-size: 0.7rem; pointer-events: none; text-transform: uppercase; }

        .wii-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; width: 95%; max-width: 800px; padding: 20px; }
        .btn-wii { background: var(--wii-blue); color: white; padding: 15px 40px; border-radius: 50px; font-weight: bold; border: 2px solid rgba(255,255,255,0.3); font-size: 1.2rem; }
    </style>
</head>
<body>

    <div id="layer-hw">
        <video id="video-source" playsinline style="display:none"></video>
        <video id="webcam" autoplay muted playsinline></video>
        <canvas id="game-canvas"></canvas>
    </div>

    <div id="layer-os">
        
        <div id="screen-safety" class="screen" style="z-index: 100;">
            <div class="bg-white p-8 rounded-3xl text-center shadow-xl border-4 border-gray-200">
                <h1 class="text-2xl font-black text-gray-700 mb-2">ThIAguinho Wii</h1>
                <p class="text-gray-400 mb-6 text-sm">Toque para iniciar o sistema.</p>
                <button onclick="window.System.boot()" class="btn-wii">LIGAR</button>
                <div id="boot-log" class="mt-4 text-xs text-blue-400 font-mono">Pronto.</div>
            </div>
        </div>

        <div id="screen-menu" class="screen hidden">
            <div class="wii-grid" id="channel-grid"></div>
            <div class="absolute bottom-4 text-gray-400 font-bold">OTTO OS vFinal</div>
        </div>

        <div id="game-ui" class="screen hidden" style="background: transparent;">
            <button onclick="window.System.menu()" class="absolute top-4 right-4 w-12 h-12 bg-white rounded-full font-bold shadow-lg text-xl">X</button>
            <div class="absolute top-4 left-4 bg-white/80 px-4 py-2 rounded-full font-bold text-xl" id="hud-score">0</div>
            <div id="game-msg" class="text-white text-6xl font-black drop-shadow-lg scale-0 transition-transform">GO!</div>
            <div id="ui-wheel" class="absolute top-20 left-1/2 -translate-x-1/2">
                <div id="visual-wheel"></div>
            </div>
        </div>

        <div id="screen-over" class="screen hidden" style="background: rgba(255,255,255,0.95);">
            <h1 class="text-6xl font-black text-gray-800 mb-4">FIM</h1>
            <div id="final-score" class="text-8xl text-blue-500 font-black mb-8">0</div>
            <button onclick="window.System.menu()" class="btn-wii">VOLTAR</button>
        </div>
    </div>

    <script src="js/core.js"></script>
    
    <script src="js/game_run.js"></script>
    <script src="js/game_kart.js"></script>
    <script src="js/game_box.js"></script>
    <script src="js/game_tennis.js"></script>

</body>
</html>